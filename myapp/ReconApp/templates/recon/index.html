{% extends 'base.html' %}

{% block content %}
<style>
  .text-ss {
    font-size: 0.7rem; /* Atur ukuran teks sesuai kebutuhan Anda */
    /* Atur properti lainnya jika diperlukan */
  }
  .text-sss {
    font-size: 0.6rem; /* Atur ukuran teks sesuai kebutuhan Anda */
    /* Atur properti lainnya jika diperlukan */
  }
</style>

<!-- Menggunakan utilitas grid -->
<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
  <div class=" pt-3 sm:flex sm:items-center sm:justify-between">
    <h3 class="text-base font-semibold leading-6 text-gray-900">Rekonsiliasi Tagihan</h3>
    <div class="mt-3 flex sm:ml-4 sm:mt-0">
      <div x-data="{ showFilter: false }" class="flex justify-end ">
        <!-- Tombol untuk membuka modal -->
        <button @click="showFilter = true" type="button" class="flex justify-end rounded bg-white px-4 py-1.5 mb-1 text-sm font-semibold text-gray-600 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Filter data</button>
  
        <!-- Modal -->
        <div x-show="showFilter"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        x-description="Modal panel, show/hide based on modal state."
        class="fixed top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6 z-50"
        @click.away="showFilter = false">
        <form id="filter-form"
            method="get"
            action="{% url 'ReconApp:index' %}">
            <div class="border">
                <div
                    class="flex justify-between items-center px-6 py-4 bg-gray-200">
                    <h2
                        class="text-lg font-semibold text-gray-800">Filter
                        Data</h2>
                    <button
                        type="submit"
                        class="px-4 py-2 bg-red-500 text-white font-semibold rounded hover:bg-red-600 focus:outline-none focus:bg-red-600">Terapkan</button>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <label
                            class="block text-gray-700 text-sm font-bold mb-2">Dari
                            Tanggal</label>
                        <input
                            type="date"
                            id="start_date"
                            name="start_date"
                            class="block w-full bg-gray-200 text-gray-800 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500">
                    </div>
                    <div class="mb-4">
                        <label
                            class="block text-gray-700 text-sm font-bold mb-2">Hingga
                            Tanggal</label>
                        <input
                            type="date"
                            id="end_date"
                            name="end_date"
                            class="block w-full bg-gray-200 text-gray-800 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500">
                    </div>
                </div>
            </div>
        </form>
    </div>
      </div>  
      <button type="button" class="inline-flex items-center rounded-md bg-white px-3 ml-4 mb-1  text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Print PDF</button>
  
    </div>
  </div>
  
    
    <div class="py-5 border">
      <dl class="grid grid-cols-1 gap-5 sm:grid-cols-3 mx-6 mb-2">
        <div class="overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6">
          <dt class="truncate text-sm font-medium text-gray-500">Total Uplift in Lts by IAA</dt>
          <dd class="mt-1 text-3xl font-semibold tracking-tight text-gray-900">{{ total_uplift_in_lts }}</dd>
        </div>
        <div class="overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6">
          <dt class="truncate text-sm font-medium text-gray-500">Total Uplift in Lts by Vendor</dt>
          <dd class="mt-1 text-3xl font-semibold tracking-tight text-gray-900">{{ total_uplift_in_lts_vendor }}</dd>
        </div>
        <div class="overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6">
          <dt class="truncate text-sm font-medium text-gray-500">Selisih</dt>
          <dd class="mt-1 text-3xl font-semibold tracking-tight text-gray-900">{{ selisih }}</dd>
        </div>
      </dl>
        <div class="grid grid-cols-1 md:grid-cols-2">
          <div class="bg-white ">
            <div class="mx-auto max-w-7xl">
              <div class="">
                <div class="sm:flex sm:items-center">
                  <div class="sm:flex-auto ">
                    <h1 class="text-sm font-semibold leading-6 text-gray-600">
                      <i class="fas fa-plane mr-2"></i> Fuel data by IAA
                    </h1>
                  </div>
                </div>
              
                <div class=" flow-root sm:mx-0 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg border-r">
                  <table class="min-w-full">
                    <colgroup>
                      <col class="w-full sm:w-1/4">
                      <col class=" sm:w-1/12">
                      <col class="sm:w-1/12">
                      <col class="sm:w-1/8">
                    </colgroup>
                    <thead class="border-b border-gray-300 text-gray-900 bg-gray-50">
                      <tr>
                        <th scope="col" class="py-2 pl-4 pr-3 text-left text-ss  font-semibold text-gray-900 sm:table-cell">Date</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Flight</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Dep</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Arr</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Reg</th>
                        <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-0">Uplift In Lts</th>
                        <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-0">Vendor</th>
                        <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-1">Invoice</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for reconsiliasi in Reconsiliasi %}
                      <tr class="border-b border-gray-200  even:bg-white hover:bg-blue-50 transition-colors duration-300">
                        <td class="max-w-0 py-2 pl-4 pr-3 text-ss sm:table-cell">{{ reconsiliasi.date_occ|date:"D, N j, Y" }}</td>
                        <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ reconsiliasi.flight_occ }}</td>
                        <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ reconsiliasi.departure_occ }}</td>
                        <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ reconsiliasi.arrival_occ }}</td>
                        <td class="hidden px-3 py-2 text-right text-sss text-gray-500 sm:table-cell">{{ reconsiliasi.registration_occ }}</td>
                        <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-0">{{ reconsiliasi.uplift_in_lts_occ }}</td>
                        <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-0">Pertamina</td>
                        <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-1">{{ reconsiliasi.invoice_no }}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                    <tfoot>
                      <tr>
                        <th scope="row" colspan="5" class="pl-4 pr-3 pt-10 sm:pb-10 md:pb-10 text-right text-sm font-semibold text-gray-900 sm:table-cell sm:pl-0">Total:</th>
                        <td class="pl-3 pr-4 pt-10 sm:pb-10 md:pb-10 text-right text-sm font-semibold text-gray-900 sm:pr-0">{{ total_uplift_in_lts }}</td>
                      </tr>
                    </tfoot>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-white">
            <div class="mx-auto max-w-7xl">
              <div class="sm:px-6">
                <div class="sm:flex sm:items-center">
                  <div class="sm:flex-auto">
                    <h1 class="text-sm  font-semibold leading-6 text-gray-600">
                      <i class="fas fa-truck "></i> Fuel data by Vendor
                    </h1>
                  </div>
                </div>


                <div class=" flow-root sm:-ml-4 sm:-mr-6 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg">
                  <table class="min-w-full">
                    <colgroup>
                      <col class="w-full sm:w-1/4">
                      <col class=" sm:w-1/12">
                      <col class="sm:w-1/12">
                      <col class="sm:w-1/8">
                    </colgroup>
                    <thead class="border-b border-gray-300 text-gray-900 bg-gray-50">
                      <tr>
                        <th scope="col" class="py-2 pl-4 pr-3 text-left text-ss  font-semibold text-gray-900 sm:table-cell">Date</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Flight</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Dep</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Arr</th>
                        <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Reg</th>
                        <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-0">Uplift In Lts</th>
                        <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-0">Vendor</th>
                        <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-1">Invoice</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for reconsiliasi in Reconsiliasi %}
                      <tr class="border-b border-gray-200  even:bg-white hover:bg-blue-50 transition-colors duration-300">
                        <td class="max-w-0 py-2 pl-4 pr-3 text-ss sm:table-cell">{{ reconsiliasi.date_ven|date:"D, N j, Y" }}</td>
                        <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ reconsiliasi.flight_ven }}</td>
                        <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ reconsiliasi.departure_ven }}</td>
                        <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ reconsiliasi.arrival_ven }}</td>
                        <td class="hidden px-3 py-2 text-right text-sss text-gray-500 sm:table-cell">{{ reconsiliasi.registration_ven }}</td>
                        <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-0">{{ reconsiliasi.uplift_in_lts_ven }}</td>
                        <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-0">Pertamina</td>
                        <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-1">{{ reconsiliasi.invoice_no }}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                    <tfoot>
                      <div>
                        <tr>
                          <th scope="row" colspan="5" class="pl-4 pr-3 pt-10 sm:pb-10 md:pb-10 text-right text-sm font-semibold text-gray-900 sm:table-cell sm:pl-0">Total:</th>
                          <td class="pl-3 pr-4 pt-10 sm:pb-10 md:pb-10 text-right text-sm font-semibold text-gray-900 sm:pr-0">{{ total_uplift_in_lts_vendor }}</td>
                        </tr>                      
                      </div>
                     
                    </tfoot>
                  </table>
                </div>
                

                <!-- missing invoice_no -->
                <div class=" mt-20 flow-root sm:mx-0">
                    <div class="text-center">
                        <p class="text-sm font-semibold leading-6 text-gray-600 pb-2">Data dari Vendor Tidak Ditemukan dalam Rekaman IAA</p>
                    </div>
                    <table class="min-w-full">
                      <colgroup>
                        <col class="w-full sm:w-1/4">
                        <col class=" sm:w-1/12">
                        <col class="sm:w-1/12">
                        <col class="sm:w-1/8">
                      </colgroup>
                      <thead class="border-b border-gray-300 text-gray-900 bg-gray-50">
                        <tr>
                          <th scope="col" class="py-2 pl-4 pr-3 text-left text-ss  font-semibold text-gray-900 sm:table-cell">Date</th>
                          <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Flight</th>
                          <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Dep</th>
                          <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Arr</th>
                          <th scope="col" class="hidden px-3 py-2 text-right text-ss font-semibold text-gray-900 sm:table-cell">Reg</th>
                          <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-0">Uplift In Lts</th>
                          <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-0">Vendor</th>
                          <th scope="col" class="py-2 pl-3 pr-4 text-right text-ss font-semibold text-gray-900 sm:pr-1">Invoice</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for missingInvoice in MissingInvoice %}
                        <tr class="border-b border-gray-200  even:bg-white hover:bg-blue-50 transition-colors duration-300">
                          <td class="max-w-0 py-2 pl-4 pr-3 text-ss sm:table-cell">{{ missingInvoice.date|date:"D, N j, Y" }}</td>
                          <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ missingInvoice.flight}}</td>
                          <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ missingInvoice.departure}}</td>
                          <td class="hidden px-3 py-2 text-right text-ss text-gray-500 sm:table-cell">{{ missingInvoice.arrival}}</td>
                          <td class="hidden px-3 py-2 text-right text-sss text-gray-500 sm:table-cell">{{ missingInvoice.registration}}</td>
                          <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-0">{{ missingInvoice.uplift_in_lts}}</td>
                          <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-0">Pertamina</td>
                          <td class="py-2 pl-3 pr-4 text-right text-ss text-gray-500 sm:pr-1">{{ missingInvoice.invoice_no }}</td>
                        </tr>
                        {% endfor %}
                      </tbody>
                      <tfoot>
                        <tr>
                          <th scope="row" colspan="5" class="pl-4 pr-3 pt-10 sm:pb-10 md:pb-10 text-right text-sm font-semibold text-gray-900 sm:table-cell sm:pl-0">Total:</th>
                          <td class="pl-3 pr-4 pt-10 sm:pb-10 md:pb-10 text-right text-sm font-semibold text-gray-900 sm:pr-0">{{ total_missing_lts }}</td>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                <!-- end missing invoice_no  -->
              </div>
            </div>
          </div>
        </div>
      </div>

</div>

{% endblock content %}
